# Stricuring AI agent projects for production with langgraph

The internet is full of agent project demos, with everything in notebooks, without structure nor good practices.
By developing and reviewing lots of python projects and lots of agent development projects, I have developed a nice layout for structuring agentic projects, one where I don't feel short generally for adding new features, since everything is well organized and no nonsense is added, avoiding a simple main file with a tool file that imports everything.

This layout mixes practices from clean architecture, SOLID principles and official documentation from the frameworks used, and creates a nice maintinable way of bootastraping and scaling agent projects. Also allows to have easy developing tools, like a self hosted langsmith ui for devloping the agents or runnign fastapi in dev mode.



### Meet our heroes (or tech stack)
Alt: image of the logos of the tech stack

From outside to inside:
Docker: For having a standardized way to run the project in any environment.
Uv: As package manager, uv is becoming more and more popular, way faster, safer and less prone to errors than pip.
FastAPI: As framework for developing the API.
Pydantic: As data validation.
Langgraph: As framework for developing agentic workflows.

### The goal
The goal is to create a production-ready agent project with a good structure and good practices.

### The structure
Alt: short video of the structure with some clicks to show internal files.

At the root level we see 3 folders. App is the main entry point of the applpication, basically here goes all the code that will be shipped to the world.
Notebooks is a very handy fodler for developing purposes. All projects have an early stage of interacting in an exploratory way with the context surrounding it, connnecting to apis, analyzing data, this is tipically done in a notebook and very few times saved. I have come to realisation that loosing this exploratory phase generally makes us duplicate the work, when new features arrive or someone has to explore the project, keeping it reposited has become handy many times, and kudos to @Miguel Otero from who I grab this idea of keeping it along with the main application.

static will just contain static files, like images or inphographic materials in general for the documentation of the project, again, this is not shipped.

.env will contain the environment variables for development phase of the project, it is very important not to commit this file to the repository since it typucally contains sensitive information like api keys, passwords, etc.
.env.example is used to copy the structure of the .env file, it is a good practice to have it to avoid mistakes when creating the .env file, just a hint for how the file should look like.
.gitignore is used to avoid committing sensitive information to the repository, for example we wont be commiting cache files generated automatically by the frameworks, like __pycache__ or .DS_Store files or langgraph's development checkpoint files.
.python-version is used to specify the python version for the project, it is a good practice to have it to avoid mistakes when creating the virtual environment.
CHANGELOG.md is optional, specially usefull in larger projects where we want to keep track and show how the features are added to the project with each release.
Dockerfile is used to build the docker image for the project, for now we keep it very simple with some layer caching optimizations, maybe in other post we can deep dive into creating a more complex Dockerfile that makes use of multi stage builds and other optimizations to ship as light as possible.
langgraph.json is used to by the development mode of langgraph, it tell where should it look for the graphs to show in the ui, and their possible dependencies.
Makefile is one of my favorite tools in any project, in my opinion it is even better than a readme file for understanding what a project can do, it shows how to run the project and what are the typical available necessary commands, for example running the project in dev mode, running the tests, running langgraph's dev mode, building or starting the container, a well streamlined organized Makefile is the best way to understand what a project can do and how to do it.
pyproject.toml is the configuration file generated by uv.
README.md contains the documentation of the project.
uv.lock is the lock file generated by uv, it contains the exact version of the dependencies for the project, is generated automatically by uv and is used to install the dependencies in the production environment.
<!-- There must be a better way to organize this explanation, by grouping by purpose for example-->

### The app folder



## Gift!

I found out I loose a lot of time in just setting up all the starting point layout for projects so I created a cookicutter to help me bootstrap new projects with the same layout and structure in a way faster way, I decided to make this public.

What is cookicutter? Cookicutter is a tool that allows you to create a new project from a template, it is a very popular tool in the python community, and it is very easy to use, it is a tool that allows you to create a new project from a template, it is a very popular tool in the python community, and it is very easy to use, it is a tool that allows you to create a new project from a template, it is a very popular tool in the python community, and it is very easy to use. Just follow the instalation guide and you will be able to create a new project with the same layout and structure in a way faster way.

I will leave the link to the cookicutter repository here: https://github.com/hugoromerorico/production-agent-cookiecutter-langgraph
And the command to create a new project with the same layout and structure in a way faster way:

```sh
cookiecutter https://github.com/hugoromerorico/production-agent-cookiecutter-langgraph
```

I have kept to a minimal the questions asked at the start, making some opinionated decisions of how they are used, so there is no pain at all in using the tool by not knowing what each thing will be used for.

## Conclusion

I hope you enjoyed this article, if you have any questions or suggestions, please feel free to contact me.

If you want to know more about the tech stack used, you can check the following links:

- [Docker](https://www.docker.com/)
- [Uv](https://docs.astral.sh/uv/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Pydantic](https://docs.pydantic.dev/)
- [Langgraph](https://langchain-ai.github.io/langgraph/)